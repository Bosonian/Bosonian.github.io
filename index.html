<!DOCTYPE html>
<html lang="de">
<head>
    <!-- ... (existing head content) ... -->
    <style>
        /* Add to existing styles */
        .risk-low { color: green; }
        .risk-medium { color: orange; }
        .risk-high { color: red; }
        .note { font-size: 14px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <h1>GFAP Blutungsrisiko-Check</h1>
        <p>Geben Sie den GFAP-Wert ein, um die Wahrscheinlichkeit einer intrakraniellen Blutung zu √ºberpr√ºfen.</p>
        
        <form id="gfapForm">
            <label for="gfap" style="display: none;">GFAP-Wert</label>
            <input type="number" id="gfap" placeholder="GFAP-Wert eingeben (pg/mL)" aria-label="GFAP-Wert"><br>
            <button type="button" onclick="checkICHProbability()">Risiko pr√ºfen</button>
            <button type="button" onclick="resetForm()" style="background-color: #dc3545;">Zur√ºcksetzen</button>
        </form>
        
        <div class="result" id="result"></div>
    </div>
    
    <script>
        function calculateICHProbability(gfap) {
            gfap = Math.max(29, Math.min(gfap, 10001)); // Censor values
            const A = -5.3520, B = 0.0049;
            const probability = 100 / (1 + Math.exp(-(A + B * gfap)));
            return probability;
        }

        function checkICHProbability() {
            const gfap = parseFloat(document.getElementById('gfap').value);
            const resultDiv = document.getElementById('result');

            if (isNaN(gfap) || gfap < 0) {
                resultDiv.innerHTML = "Bitte geben Sie einen g√ºltigen GFAP-Wert ein.";
                return;
            }

            const probability = calculateICHProbability(gfap);
            let riskLevel = "";
            if (probability < 10) riskLevel = "Niedriges Risiko üü¢";
            else if (probability < 50) riskLevel = "Mittleres Risiko üü°";
            else riskLevel = "Hohes Risiko üî¥";

            let note = "";
            if (gfap < 29 || gfap > 10001) {
                note = `<br><small class="note">Hinweis: Werte unter 29 oder √ºber 10,001 werden als 29 bzw. 10,001 behandelt.</small>`;
            }

            resultDiv.innerHTML = `
                Gesch√§tzte Wahrscheinlichkeit: <strong>${probability.toFixed(1)}%</strong><br>
                <span class="${getRiskClass(probability)}">${riskLevel}</span>
                ${note}
            `;
        }

        function getRiskClass(probability) {
            if (probability < 10) return "risk-low";
            else if (probability < 50) return "risk-medium";
            else return "risk-high";
        }

        function resetForm() {
            document.getElementById('gfap').value = "";
            document.getElementById('result').innerHTML = "";
        }
    </script>
</body>
</html>